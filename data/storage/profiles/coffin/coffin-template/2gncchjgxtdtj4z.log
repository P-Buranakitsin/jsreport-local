{"type":"operationStart","subtype":"profile","data":{"_id":"zKnBpfugfibpbwKL","timestamp":"2022-05-25T12:17:02.833Z","state":"queued","mode":"standard","blobName":"profiles/2gncchjgxtdtj4z.log","creationDate":"2022-05-25T12:17:02.834Z","modificationDate":"2022-05-25T12:17:02.834Z","shortid":"EIWjL9d","$entitySet":"profiles"},"doDiffs":false,"timestamp":1653481022833,"id":"pq2vfk94mhcfo1u","previousOperationId":null,"operationId":"uf546am9gdx3ccc"}
{"type":"log","level":"info","message":"Render request 19 queued for execution and waiting for availible worker","previousOperationId":"uf546am9gdx3ccc","timestamp":1653481022833,"id":"ddyw7s9d0f2krqo"}
{"type":"operationStart","subtype":"render","name":"coffin-template","previousOperationId":"uf546am9gdx3ccc","timestamp":1653481022843,"id":"85vy9vbc721h63i","previousEventId":"pq2vfk94mhcfo1u","operationId":"oslu18nixgagpj2"}
{"type":"log","timestamp":1653481022843,"level":"info","message":"Starting rendering request 19 (user: null)","meta":{"rootId":"2gncchjgxtdtj4z","id":"2gncchjgxtdtj4z"},"id":"u0psdg2twfjo1kt","previousOperationId":"oslu18nixgagpj2"}
{"type":"log","timestamp":1653481022844,"level":"info","message":"Rendering template { name: coffin-template, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"2gncchjgxtdtj4z","id":"2gncchjgxtdtj4z"},"id":"59umtp0mvvle9hs","previousOperationId":"oslu18nixgagpj2"}
{"type":"log","timestamp":1653481022844,"level":"debug","message":"Inline data specified.","meta":{"rootId":"2gncchjgxtdtj4z","id":"2gncchjgxtdtj4z"},"id":"807hyenrg778kd6","previousOperationId":"oslu18nixgagpj2"}
{"type":"log","timestamp":1653481022847,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"2gncchjgxtdtj4z","id":"2gncchjgxtdtj4z"},"id":"8tc84y413gdxslw","previousOperationId":"oslu18nixgagpj2"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1653481022848,"id":"jqgmcikd1jcvkks","previousEventId":"85vy9vbc721h63i","operationId":"g2rhhgn62wxaf1m","previousOperationId":"oslu18nixgagpj2"}
{"type":"log","timestamp":1653481022848,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"2gncchjgxtdtj4z","id":"2gncchjgxtdtj4z"},"id":"ye16xh6z98c06sh","previousOperationId":"g2rhhgn62wxaf1m"}
{"type":"log","timestamp":1653481023109,"level":"debug","message":"require of npm date-fns@2.28.0","meta":{"rootId":"2gncchjgxtdtj4z","id":"2gncchjgxtdtj4z"},"id":"66r9wnooq4yb1wb","previousOperationId":"g2rhhgn62wxaf1m"}
{"type":"log","timestamp":1653481023190,"level":"debug","message":"{\n  add: [Getter],\n  addBusinessDays: [Getter],\n  addDays: [Getter],\n  addHours: [Getter],\n  addISOWeekYears: [Getter],\n  addMilliseconds: [Getter],\n  addMinutes: [Getter],\n  addMonths: [Getter],\n  addQuarters: [Getter],\n  addSeconds: [Getter],\n  addWeeks: [Getter],\n  addYears: [Getter],\n  areIntervalsOverlapping: [Getter],\n  clamp: [Getter],\n  closestIndexTo: [Getter],\n  closestTo: [Getter],\n  compareAsc: [Getter],\n  compareDesc: [Getter],\n  daysToWeeks: [Getter],\n  differenceInBusinessDays: [Getter],\n  differenceInCalendarDays: [Getter],\n  differenceInCalendarISOWeekYears: [Getter],\n  differenceInCalendarISOWeeks: [Getter],\n  differenceInCalendarMonths: [Getter],\n  differenceInCalendarQuarters: [Getter],\n  differenceInCalendarWeeks: [Getter],\n  differenceInCalendarYears: [Getter],\n  differenceInDays: [Getter],\n  differenceInHours: [Getter],\n  differenceInISOWeekYears: [Getter],\n  differenceInMilliseconds: [Getter],\n  differenceInMinutes: [Getter],\n  differenceInMonths: [Getter],\n  differenceInQuarters: [Getter],\n  differenceInSeconds: [Getter],\n  differenceInWeeks: [Getter],\n  differenceInYears: [Getter],\n  eachDayOfInterval: [Getter],\n  eachHourOfInterval: [Getter],\n  eachMinuteOfInterval: [Getter],\n  eachMonthOfInterval: [Getter],\n  eachQuarterOfInterval: [Getter],\n  eachWeekOfInterval: [Getter],\n  eachWeekendOfInterval: [Getter],\n  eachWeekendOfMonth: [Getter],\n  eachWeekendOfYear: [Getter],\n  eachYearOfInterval: [Getter],\n  endOfDay: [Getter],\n  endOfDecade: [Getter],\n  endOfHour: [Getter],\n  endOfISOWeek: [Getter],\n  endOfISOWeekYear: [Getter],\n  endOfMinute: [Getter],\n  endOfMonth: [Getter],\n  endOfQuarter: [Getter],\n  endOfSecond: [Getter],\n  endOfToday: [Getter],\n  endOfTomorrow: [Getter],\n  endOfWeek: [Getter],\n  endOfYear: [Getter],\n  endOfYesterday: [Getter],\n  format: [Getter],\n  formatDistance: [Getter],\n  formatDistanceStrict: [Getter],\n  formatDistanceToNow: [Getter],\n  formatDistanceToNowStrict: [Getter],\n  formatDuration: [Getter],\n  formatISO: [Getter],\n  formatISO9075: [Getter],\n  formatISODuration: [Getter],\n  formatRFC3339: [Getter],\n  formatRFC7231: [Getter],\n  formatRelative: [Getter],\n  fromUnixTime: [Getter],\n  getDate: [Getter],\n  getDay: [Getter],\n  getDayOfYear: [Getter],\n  getDaysInMonth: [Getter],\n  getDaysInYear: [Getter],\n  getDecade: [Getter],\n  getHours: [Getter],\n  getISODay: [Getter],\n  getISOWeek: [Getter],\n  getISOWeekYear: [Getter],\n  getISOWeeksInYear: [Getter],\n  getMilliseconds: [Getter],\n  getMinutes: [Getter],\n  getMonth: [Getter],\n  getOverlappingDaysInIntervals: [Getter],\n  getQuarter: [Getter],\n  getSeconds: [Getter],\n  getTime: [Getter],\n  getUnixTime: [Getter],\n  getWeek: [Getter],\n  getWeekOfMonth: [Getter],\n  getWeekYear: [Getter],\n  getWeeksInMonth: [Getter],\n  getYear: [Getter],\n  hoursToMilliseconds: [Getter],\n  hoursToMinutes: [Getter],\n  hoursToSeconds: [Getter],\n  intervalToDuration: [Getter],\n  intlFormat: [Getter],\n  isAfter: [Getter],\n  isBefore: [Getter],\n  isDate: [Getter],\n  isEqual: [Getter],\n  isExists: [Getter],\n  isFirstDayOfMonth: [Getter],\n  isFriday: [Getter],\n  isFuture: [Getter],\n  isLastDayOfMonth: [Getter],\n  isLeapYear: [Getter],\n  isMatch: [Getter],\n  isMonday: [Getter],\n  isPast: [Getter],\n  isSameDay: [Getter],\n  isSameHour: [Getter],\n  isSameISOWeek: [Getter],\n  isSameISOWeekYear: [Getter],\n  isSameMinute: [Getter],\n  isSameMonth: [Getter],\n  isSameQuarter: [Getter],\n  isSameSecond: [Getter],\n  isSameWeek: [Getter],\n  isSameYear: [Getter],\n  isSaturday: [Getter],\n  isSunday: [Getter],\n  isThisHour: [Getter],\n  isThisISOWeek: [Getter],\n  isThisMinute: [Getter],\n  isThisMonth: [Getter],\n  isThisQuarter: [Getter],\n  isThisSecond: [Getter],\n  isThisWeek: [Getter],\n  isThisYear: [Getter],\n  isThursday: [Getter],\n  isToday: [Getter],\n  isTomorrow: [Getter],\n  isTuesday: [Getter],\n  isValid: [Getter],\n  isWednesday: [Getter],\n  isWeekend: [Getter],\n  isWithinInterval: [Getter],\n  isYesterday: [Getter],\n  lastDayOfDecade: [Getter],\n  lastDayOfISOWeek: [Getter],\n  lastDayOfISOWeekYear: [Getter],\n  lastDayOfMonth: [Getter],\n  lastDayOfQuarter: [Getter],\n  lastDayOfWeek: [Getter],\n  lastDayOfYear: [Getter],\n  lightFormat: [Getter],\n  max: [Getter],\n  milliseconds: [Getter],\n  millisecondsToHours: [Getter],\n  millisecondsToMinutes: [Getter],\n  millisecondsToSeconds: [Getter],\n  min: [Getter],\n  minutesToHours: [Getter],\n  minutesToMilliseconds: [Getter],\n  minutesToSeconds: [Getter],\n  monthsToQuarters: [Getter],\n  monthsToYears: [Getter],\n  nextDay: [Getter],\n  nextFriday: [Getter],\n  nextMonday: [Getter],\n  nextSaturday: [Getter],\n  nextSunday: [Getter],\n  nextThursday: [Getter],\n  nextTuesday: [Getter],\n  nextWednesday: [Getter],\n  parse: [Getter],\n  parseISO: [Getter],\n  parseJSON: [Getter],\n  previousDay: [Getter],\n  previousFriday: [Getter],\n  previousMonday: [Getter],\n  previousSaturday: [Getter],\n  previousSunday: [Getter],\n  previousThursday: [Getter],\n  previousTuesday: [Getter],\n  previousWednesday: [Getter],\n  quartersToMonths: [Getter],\n  quartersToYears: [Getter],\n  roundToNearestMinutes: [Getter],\n  secondsToHours: [Getter],\n  secondsToMilliseconds: [Getter],\n  secondsToMinutes: [Getter],\n  set: [Getter],\n  setDate: [Getter],\n  setDay: [Getter],\n  setDayOfYear: [Getter],\n  setHours: [Getter],\n  setISODay: [Getter],\n  setISOWeek: [Getter],\n  setISOWeekYear: [Getter],\n  setMilliseconds: [Getter],\n  setMinutes: [Getter],\n  setMonth: [Getter],\n  setQuarter: [Getter],\n  setSeconds: [Getter],\n  setWeek: [Getter],\n  setWeekYear: [Getter],\n  setYear: [Getter],\n  startOfDay: [Getter],\n  startOfDecade: [Getter],\n  startOfHour: [Getter],\n  startOfISOWeek: [Getter],\n  startOfISOWeekYear: [Getter],\n  startOfMinute: [Getter],\n  startOfMonth: [Getter],\n  startOfQuarter: [Getter],\n  startOfSecond: [Getter],\n  startOfToday: [Getter],\n  startOfTomorrow: [Getter],\n  startOfWeek: [Getter],\n  startOfWeekYear: [Getter],\n  startOfYear: [Getter],\n  startOfYesterday: [Getter],\n  sub: [Getter],\n  subBusinessDays: [Getter],\n  subDays: [Getter],\n  subHours: [Getter],\n  subISOWeekYears: [Getter],\n  subMilliseconds: [Getter],\n  subMinutes: [Getter],\n  subMonths: [Getter],\n  subQuarters: [Getter],\n  subSeconds: [Getter],\n  subWeeks: [Getter],\n  subYears: [Getter],\n  toDate: [Getter],\n  weeksToDays: [Getter],\n  yearsToMonths: [Getter],\n  yearsToQuarters: [Getter],\n  daysInWeek: [Getter],\n  maxTime: [Getter],\n  millisecondsInMinute: [Getter],\n  millisecondsInHour: [Getter],\n  millisecondsInSecond: [Getter],\n  minTime: [Getter],\n  minutesInHour: [Getter],\n  monthsInQuarter: [Getter],\n  monthsInYear: [Getter],\n  quartersInYear: [Getter],\n  secondsInHour: [Getter],\n  secondsInMinute: [Getter]\n}","meta":{"rootId":"2gncchjgxtdtj4z","id":"2gncchjgxtdtj4z"},"id":"9had3eo1bzn1m72","previousOperationId":"g2rhhgn62wxaf1m"}
{"type":"log","timestamp":1653481023224,"level":"warn","message":"Error when processing render request 19 Error when evaluating engine handlebars for template /coffin/coffin-template\nformattedDate.getFullYear is not a function\n\n(sandbox.js line 12:53)\n\n  1749 |     console.log(fns)\n  1750 |     const formattedDate = fns.format(fns.parseISO(date), 'dd MMM yyyy')\n> 1751 |     return (formattedDate.setFullYear(formattedDate.getFullYear() + 543))\n       |                                                     ^\n  1752 | }\n  1753 |\n  1754 | function getNumberText (data) {\n\n TypeError: formattedDate.getFullYear is not a function\n    at Proxy.formatDate (sandbox.js:1751:53)\n    at BaseHandler.apply (D:\\cheddo\\jsreport-local\\node_modules\\vm2\\lib\\bridge.js:477:11)\n    at Object.<anonymous> (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:243:27)\n    at Object.wrapper (D:\\cheddo\\jsreport-local\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:34:30), <anonymous>:72:110)\n    at main (D:\\cheddo\\jsreport-local\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (D:\\cheddo\\jsreport-local\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:66:14)\n    at Object.execute (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:26:43)\n    at executionFn (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:149:40)","meta":{"rootId":"2gncchjgxtdtj4z","id":"2gncchjgxtdtj4z"},"id":"yjdynz5cn0npk0y","previousOperationId":"g2rhhgn62wxaf1m"}
{"type":"log","timestamp":1653481023224,"level":"warn","message":"Rendering request 19 finished with error in 391 ms","meta":{"rootId":"2gncchjgxtdtj4z","id":"2gncchjgxtdtj4z"},"id":"4cwvy7f46xd3jo4","previousOperationId":"g2rhhgn62wxaf1m"}
{"type":"error","timestamp":1653481023231,"statusCode":400,"weak":true,"lineNumber":12,"entity":{"shortid":"IEkXjVCUJ","name":"coffin-template","content":"<html>\r\n\r\n<head>\r\n    <meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\">\r\n    <style>\r\n        {{asset \"/coffin/assets/stylesheets/styles.css\"}}\r\n    </style>\r\n</head>\r\n\r\n<body>\r\n    <div class=\"zero-container\">\r\n        <img src=\"{{asset \"/coffin/assets/images/logo.jpg\" \"dataURI\"}}\" style=\"width:100%; max-width:150px;\" />\r\n        <div class=\"title-text\">ใบเสร็จรับเงิน</div>\r\n        <div class=\"\">ต้นฉบับ</div>\r\n    </div>\r\n    <div class=\"first-container\">\r\n        <div class=\"first-sub-container-1\">\r\n            <div>การฌาปนกิจสงเคราะห์</div>\r\n            <div>สำนักงานการปฏิรูปที่ดินเพื่อเกษตรกรรม</div>\r\n            <div>เลขที่ 1 ถนนราชดำเนินนอก</div>\r\n            <div>แขวงบ้านพานถม เขตพระนคร</div>\r\n            <div>กรุงเทพฯ 10200</div>\r\n            <div>โทรศัพท์/โทรสาร 0-2280-7052</div>\r\n        </div>\r\n        <div class=\"first-sub-container-2\">\r\n            <div class=\"first-sub-sub-container-1\">\r\n                <div class=\"rs-60\">เล่มที่ {{book}}</div>\r\n                <div class=\"rs-60\">เลขที่ {{bookNo}}</div>\r\n            </div>\r\n            <div class=\"first-sub-sub-container-2\">\r\n                <div class=\"rs-120\">วันที่ {{formatDate createdAt}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"underline\"></div>\r\n    <div class=\"second-container\">\r\n        <table>\r\n            <tr>\r\n                <th>เลขสมาชิก</th>\r\n                <th>ชื่อ - นามสกุล</th>\r\n                <th>รายการ</th>\r\n                <th class=\"text-align-end\">จำนวนเงิน</th>\r\n            </tr>\r\n            {{#each data}}\r\n            <tr>\r\n                <td>{{this.memberNo}}</td>\r\n                <td>{{this.name}}</td>\r\n                {{#each this.listAndPrice}} {{#if (isFirstItem @index)}}\r\n                <td>{{this.list}}</td>\r\n                <td class=\"text-align-end\">{{this.price}}</td>\r\n                {{else}}\r\n                <tr>\r\n                    <td></td>\r\n                    <td></td>\r\n                    <td>{{this.list}}</td>\r\n                    <td class=\"text-align-end\">{{this.price}}</td>\r\n                </tr>\r\n                {{/if}} {{/each}}\r\n            </tr>\r\n            {{/each}}\r\n            <tr>\r\n                <td></td>\r\n                <td class=\"bold-text\">รวม {{getNumberText data}}</td>\r\n                <td></td>\r\n                <td class=\"bold-text text-align-end\">{{totalPrice data}}</td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n    <div class=\"underline\"></div>\r\n    <div class=\"third-container\">\r\n        <div class=\"third-sub-container-1\">\r\n            <div>เหรัญญิก</div>\r\n            <div>การฌาปนกิจสงเคราะห์ ส.ป.ก.</div>\r\n        </div>\r\n        <div class=\"third-sub-container-2\">\r\n            <div>เจ้าหน้าที่การเงิน</div>\r\n        </div>\r\n    </div>\r\n    <div class=\"dashed-underline\"></div>\r\n    <div class=\"forth-container\">\r\n        <img src=\"{{asset \"/coffin/assets/images/logo.jpg\" \"dataURI\"}}\" style=\"width:100%; max-width:150px;\" />\r\n        <div class=\"title-text\">ใบเสร็จรับเงิน</div>\r\n        <div>สำเนา</div>\r\n    </div>\r\n</body>\r\n\r\n</html>"},"property":"helpers","logged":true,"previousOperationId":"g2rhhgn62wxaf1m","id":"h90krxm6sim1rji","stack":"TypeError: formattedDate.getFullYear is not a function\n    at Proxy.formatDate (sandbox.js:1751:53)\n    at BaseHandler.apply (D:\\cheddo\\jsreport-local\\node_modules\\vm2\\lib\\bridge.js:477:11)\n    at Object.<anonymous> (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:243:27)\n    at Object.wrapper (D:\\cheddo\\jsreport-local\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:34:30), <anonymous>:72:110)\n    at main (D:\\cheddo\\jsreport-local\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (D:\\cheddo\\jsreport-local\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:66:14)\n    at Object.execute (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:26:43)\n    at executionFn (D:\\cheddo\\jsreport-local\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:149:40)","message":"Error when evaluating engine handlebars for template /coffin/coffin-template\nformattedDate.getFullYear is not a function\n\n(sandbox.js line 12:53)\n\n  1749 |     console.log(fns)\n  1750 |     const formattedDate = fns.format(fns.parseISO(date), 'dd MMM yyyy')\n> 1751 |     return (formattedDate.setFullYear(formattedDate.getFullYear() + 543))\n       |                                                     ^\n  1752 | }\n  1753 |\n  1754 | function getNumberText (data) {\n\n"}
